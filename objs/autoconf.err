

----------------------------------------
checking for C compiler


----------------------------------------
checking for -Wl,-E switch


----------------------------------------
checking for gcc builtin atomic operations


----------------------------------------
checking for C99 variadic macros


----------------------------------------
checking for gcc variadic macros


----------------------------------------
checking for gcc builtin 64 bit byteswap


----------------------------------------
checking for unistd.h


----------------------------------------
checking for inttypes.h


----------------------------------------
checking for limits.h


----------------------------------------
checking for sys/filio.h

objs/autotest.c:3:10: fatal error: 'sys/filio.h' file not found
#include <sys/filio.h>
         ^~~~~~~~~~~~~
1 error generated.
ERROR:root:compiler frontend failed to generate LLVM bitcode, halting
----------


#include <sys/filio.h>

int main(void) {
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for sys/param.h


----------------------------------------
checking for sys/mount.h


----------------------------------------
checking for sys/statvfs.h


----------------------------------------
checking for crypt.h


----------------------------------------
checking for kqueue's EVFILT_TIMER

objs/autotest.c:4:10: fatal error: 'sys/event.h' file not found
#include <sys/event.h>
         ^~~~~~~~~~~~~
1 error generated.
ERROR:root:compiler frontend failed to generate LLVM bitcode, halting
----------

#include <sys/types.h>
#include <unistd.h>
#include <sys/event.h>
                  #include <sys/time.h>

int main(void) {
    int      kq;
                  struct kevent    kev;
                  struct timespec  ts;

                  if ((kq = kqueue()) == -1) return 1;

                  kev.ident = 0;
                  kev.filter = EVFILT_TIMER;
                  kev.flags = EV_ADD|EV_ENABLE;
                  kev.fflags = 0;
                  kev.data = 1000;
                  kev.udata = 0;

                  ts.tv_sec = 0;
                  ts.tv_nsec = 0;

                  if (kevent(kq, &kev, 1, &kev, 1, &ts) == -1) return 1;

                  if (kev.flags & EV_ERROR) return 1;;
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for Darwin 64-bit kqueue millisecond timeout bug

objs/autotest.c:4:10: fatal error: 'sys/event.h' file not found
#include <sys/event.h>
         ^~~~~~~~~~~~~
1 error generated.
ERROR:root:compiler frontend failed to generate LLVM bitcode, halting
----------

#include <sys/types.h>
#include <unistd.h>
#include <sys/event.h>
                  #include <sys/time.h>

int main(void) {
    int  kq;
                  struct kevent    kev;
                  struct timespec  ts;
                  struct timeval   tv, tv0;

                  kq = kqueue();

                  ts.tv_sec = 0;
                  ts.tv_nsec = 999000000;

                  gettimeofday(&tv, 0);
                  kevent(kq, NULL, 0, &kev, 1, &ts);
                  gettimeofday(&tv0, 0);
                  timersub(&tv0, &tv, &tv);

                  if (tv.tv_sec * 1000000 + tv.tv_usec < 900000) return 1;;
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for sendfile()

In file included from objs/autotest.c:7:
/usr/local/Cellar/emscripten/1.38.12/libexec/system/include/libc/sys/errno.h:1:2: warning: redirecting incorrect #include <sys/errno.h> to <errno.h> [-W#warnings]
#warning redirecting incorrect #include <sys/errno.h> to <errno.h>
 ^
objs/autotest.c:12:23: error: implicit declaration of function 'sendfile' is invalid in C99 [-Werror,-Wimplicit-function-declaration]
                  n = sendfile(s, fd, off, &n, NULL, 0);
                      ^
1 warning and 1 error generated.
ERROR:root:compiler frontend failed to generate LLVM bitcode, halting
----------

#include <sys/types.h>
#include <unistd.h>
#include <sys/types.h>
                  #include <sys/socket.h>
                  #include <sys/uio.h>
                  #include <sys/errno.h>

int main(void) {
    int s = 0, fd = 1;
                  off_t n; off_t off = 0;
                  n = sendfile(s, fd, off, &n, NULL, 0);
                  if (n == -1 && errno == ENOSYS) return 1;
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for atomic(3)

objs/autotest.c:4:10: fatal error: 'libkern/OSAtomic.h' file not found
#include <libkern/OSAtomic.h>
         ^~~~~~~~~~~~~~~~~~~~
1 error generated.
ERROR:root:compiler frontend failed to generate LLVM bitcode, halting
----------

#include <sys/types.h>
#include <unistd.h>
#include <libkern/OSAtomic.h>

int main(void) {
    int32_t  lock = 0;
                  if (!OSAtomicCompareAndSwap32Barrier(0, 1, &lock)) return 1;
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for poll()


----------------------------------------
checking for /dev/poll

objs/autotest.c:4:10: fatal error: 'sys/devpoll.h' file not found
#include <sys/devpoll.h>
         ^~~~~~~~~~~~~~~
1 error generated.
ERROR:root:compiler frontend failed to generate LLVM bitcode, halting
----------

#include <sys/types.h>
#include <unistd.h>
#include <sys/devpoll.h>

int main(void) {
    int  n, dp; struct dvpoll  dvp;
                  dp = 0;
                  dvp.dp_fds = NULL;
                  dvp.dp_nfds = 0;
                  dvp.dp_timeout = 0;
                  n = ioctl(dp, DP_POLL, &dvp);
                  if (n == -1) return 1;
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for crypt()


----------------------------------------
checking for F_READAHEAD

objs/autotest.c:7:14: error: use of undeclared identifier 'F_READAHEAD'
    fcntl(0, F_READAHEAD, 1);;
             ^
1 error generated.
ERROR:root:compiler frontend failed to generate LLVM bitcode, halting
----------

#include <sys/types.h>
#include <unistd.h>
#include <fcntl.h>

int main(void) {
    fcntl(0, F_READAHEAD, 1);;
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for posix_fadvise()


----------------------------------------
checking for O_DIRECT


----------------------------------------
checking for F_NOCACHE

objs/autotest.c:7:14: error: use of undeclared identifier 'F_NOCACHE'
    fcntl(0, F_NOCACHE, 1);;
             ^
1 error generated.
ERROR:root:compiler frontend failed to generate LLVM bitcode, halting
----------

#include <sys/types.h>
#include <unistd.h>
#include <fcntl.h>

int main(void) {
    fcntl(0, F_NOCACHE, 1);;
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for directio()

In file included from objs/autotest.c:5:
/usr/local/Cellar/emscripten/1.38.12/libexec/system/include/libc/sys/fcntl.h:1:2: warning: redirecting incorrect #include <sys/fcntl.h> to <fcntl.h> [-W#warnings]
#warning redirecting incorrect #include <sys/fcntl.h> to <fcntl.h>
 ^
objs/autotest.c:8:5: error: implicit declaration of function 'directio' is invalid in C99 [-Werror,-Wimplicit-function-declaration]
    directio(0, DIRECTIO_ON);;
    ^
objs/autotest.c:8:17: error: use of undeclared identifier 'DIRECTIO_ON'
    directio(0, DIRECTIO_ON);;
                ^
1 warning and 2 errors generated.
ERROR:root:compiler frontend failed to generate LLVM bitcode, halting
----------

#include <sys/types.h>
#include <unistd.h>
#include <sys/types.h>
                  #include <sys/fcntl.h>

int main(void) {
    directio(0, DIRECTIO_ON);;
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for statfs()

objs/autotest.c:9:20: error: variable has incomplete type 'struct statfs'
    struct statfs  fs;
                   ^
objs/autotest.c:9:12: note: forward declaration of 'struct statfs'
    struct statfs  fs;
           ^
objs/autotest.c:10:19: error: implicit declaration of function 'statfs' is invalid in C99 [-Werror,-Wimplicit-function-declaration]
                  statfs(".", &fs);;
                  ^
2 errors generated.
ERROR:root:compiler frontend failed to generate LLVM bitcode, halting
----------

#include <sys/types.h>
#include <unistd.h>
#include <sys/param.h>
                  #include <sys/mount.h>
                  

int main(void) {
    struct statfs  fs;
                  statfs(".", &fs);;
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for statvfs()


----------------------------------------
checking for dlopen()

error: unresolved symbol: $FS
Aborting compilation due to previous errors | undefined
Traceback (most recent call last):
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emcc.py", line 3062, in <module>
    sys.exit(run())
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emcc.py", line 1778, in run
    final = shared.Building.emscripten(final, append_ext=False, extra_args=extra_args)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/shared.py", line 2268, in emscripten
    emscripten._main(cmdline)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2228, in _main
    return temp_files.run_and_clean(lambda: main(
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/tempfiles.py", line 93, in run_and_clean
    return func()
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2233, in <lambda>
    DEBUG=DEBUG,
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2159, in main
    temp_files=temp_files, DEBUG=DEBUG)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 86, in emscript
    glue, forwarded_data = compiler_glue(metadata, libraries, compiler_engine, temp_files, DEBUG)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 218, in compiler_glue
    glue, forwarded_data = compile_settings(compiler_engine, libraries, temp_files)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 530, in compile_settings
    cwd=path_from_root('src'), error_limit=300)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/jsrun.py", line 132, in run_js
    raise Exception('Expected the command ' + str(command) + ' to finish with return code ' + str(assert_returncode) + ', but it returned with code ' + str(proc.returncode) + ' instead! Output: ' + str(ret)[:error_limit])
Exception: Expected the command ['/usr/local/bin/node', '/usr/local/Cellar/emscripten/1.38.12/libexec/src/compiler.js', '/tmp/tmpJsgGUI.txt', '/usr/local/Cellar/emscripten/1.38.12/libexec/src/library_pthread_stub.js'] to finish with return code 0, but it returned with code 1 instead! Output: // The Module object: Our interface to the outside world. We import
// and export values on it. There are various ways Module can be used:
// 1. Not defined. We create it here
// 2. A function parameter, function(Module) { ..generated code.. }
// 3. pre-run appended it, var Module = {}; ..generated 
----------

#include <sys/types.h>
#include <unistd.h>
#include <dlfcn.h>

int main(void) {
    dlopen(NULL, RTLD_NOW | RTLD_GLOBAL); dlsym(NULL, "");
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for dlopen() in libdl

error: unresolved symbol: $FS
Aborting compilation due to previous errors | undefined
Traceback (most recent call last):
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emcc.py", line 3062, in <module>
    sys.exit(run())
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emcc.py", line 1778, in run
    final = shared.Building.emscripten(final, append_ext=False, extra_args=extra_args)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/shared.py", line 2268, in emscripten
    emscripten._main(cmdline)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2228, in _main
    return temp_files.run_and_clean(lambda: main(
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/tempfiles.py", line 93, in run_and_clean
    return func()
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2233, in <lambda>
    DEBUG=DEBUG,
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2159, in main
    temp_files=temp_files, DEBUG=DEBUG)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 86, in emscript
    glue, forwarded_data = compiler_glue(metadata, libraries, compiler_engine, temp_files, DEBUG)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 218, in compiler_glue
    glue, forwarded_data = compile_settings(compiler_engine, libraries, temp_files)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 530, in compile_settings
    cwd=path_from_root('src'), error_limit=300)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/jsrun.py", line 132, in run_js
    raise Exception('Expected the command ' + str(command) + ' to finish with return code ' + str(assert_returncode) + ', but it returned with code ' + str(proc.returncode) + ' instead! Output: ' + str(ret)[:error_limit])
Exception: Expected the command ['/usr/local/bin/node', '/usr/local/Cellar/emscripten/1.38.12/libexec/src/compiler.js', '/tmp/tmpABDHYq.txt', '/usr/local/Cellar/emscripten/1.38.12/libexec/src/library_pthread_stub.js'] to finish with return code 0, but it returned with code 1 instead! Output: // The Module object: Our interface to the outside world. We import
// and export values on it. There are various ways Module can be used:
// 1. Not defined. We create it here
// 2. A function parameter, function(Module) { ..generated code.. }
// 3. pre-run appended it, var Module = {}; ..generated 
----------

#include <sys/types.h>
#include <unistd.h>
#include <dlfcn.h>

int main(void) {
    dlopen(NULL, RTLD_NOW | RTLD_GLOBAL); dlsym(NULL, "");
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c -ldl
----------

----------------------------------------
checking for sched_yield()


----------------------------------------
checking for sched_setaffinity()

objs/autotest.c:7:5: error: use of undeclared identifier 'cpu_set_t'
    cpu_set_t mask;
    ^
objs/autotest.c:8:19: error: implicit declaration of function 'CPU_ZERO' is invalid in C99 [-Werror,-Wimplicit-function-declaration]
                  CPU_ZERO(&mask);
                  ^
objs/autotest.c:8:29: error: use of undeclared identifier 'mask'; did you mean 'main'?
                  CPU_ZERO(&mask);
                            ^~~~
                            main
objs/autotest.c:6:5: note: 'main' declared here
int main(void) {
    ^
objs/autotest.c:9:19: error: implicit declaration of function 'sched_setaffinity' is invalid in C99 [-Werror,-Wimplicit-function-declaration]
                  sched_setaffinity(0, sizeof(cpu_set_t), &mask);
                  ^
objs/autotest.c:9:47: error: use of undeclared identifier 'cpu_set_t'
                  sched_setaffinity(0, sizeof(cpu_set_t), &mask);
                                              ^
objs/autotest.c:9:60: error: use of undeclared identifier 'mask'; did you mean 'main'?
                  sched_setaffinity(0, sizeof(cpu_set_t), &mask);
                                                           ^~~~
                                                           main
objs/autotest.c:6:5: note: 'main' declared here
int main(void) {
    ^
6 errors generated.
ERROR:root:compiler frontend failed to generate LLVM bitcode, halting
----------

#include <sys/types.h>
#include <unistd.h>
#include <sched.h>

int main(void) {
    cpu_set_t mask;
                  CPU_ZERO(&mask);
                  sched_setaffinity(0, sizeof(cpu_set_t), &mask);
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for SO_SETFIB

objs/autotest.c:7:31: error: use of undeclared identifier 'SO_SETFIB'
    setsockopt(0, SOL_SOCKET, SO_SETFIB, NULL, 0);
                              ^
1 error generated.
ERROR:root:compiler frontend failed to generate LLVM bitcode, halting
----------

#include <sys/types.h>
#include <unistd.h>
#include <sys/socket.h>

int main(void) {
    setsockopt(0, SOL_SOCKET, SO_SETFIB, NULL, 0);
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for SO_REUSEPORT

error: unresolved symbol: htons
Aborting compilation due to previous errors | undefined
Traceback (most recent call last):
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emcc.py", line 3062, in <module>
    sys.exit(run())
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emcc.py", line 1778, in run
    final = shared.Building.emscripten(final, append_ext=False, extra_args=extra_args)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/shared.py", line 2268, in emscripten
    emscripten._main(cmdline)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2228, in _main
    return temp_files.run_and_clean(lambda: main(
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/tempfiles.py", line 93, in run_and_clean
    return func()
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2233, in <lambda>
    DEBUG=DEBUG,
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2159, in main
    temp_files=temp_files, DEBUG=DEBUG)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 86, in emscript
    glue, forwarded_data = compiler_glue(metadata, libraries, compiler_engine, temp_files, DEBUG)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 218, in compiler_glue
    glue, forwarded_data = compile_settings(compiler_engine, libraries, temp_files)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 530, in compile_settings
    cwd=path_from_root('src'), error_limit=300)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/jsrun.py", line 132, in run_js
    raise Exception('Expected the command ' + str(command) + ' to finish with return code ' + str(assert_returncode) + ', but it returned with code ' + str(proc.returncode) + ' instead! Output: ' + str(ret)[:error_limit])
Exception: Expected the command ['/usr/local/bin/node', '/usr/local/Cellar/emscripten/1.38.12/libexec/src/compiler.js', '/tmp/tmpwKJ6AK.txt', '/usr/local/Cellar/emscripten/1.38.12/libexec/src/library_pthread_stub.js'] to finish with return code 0, but it returned with code 1 instead! Output: // The Module object: Our interface to the outside world. We import
// and export values on it. There are various ways Module can be used:
// 1. Not defined. We create it here
// 2. A function parameter, function(Module) { ..generated code.. }
// 3. pre-run appended it, var Module = {}; ..generated 
----------

#include <sys/types.h>
#include <unistd.h>
#include <sys/socket.h>

int main(void) {
    setsockopt(0, SOL_SOCKET, SO_REUSEPORT, NULL, 0);
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for SO_ACCEPTFILTER

objs/autotest.c:7:31: error: use of undeclared identifier 'SO_ACCEPTFILTER'
    setsockopt(0, SOL_SOCKET, SO_ACCEPTFILTER, NULL, 0);
                              ^
1 error generated.
ERROR:root:compiler frontend failed to generate LLVM bitcode, halting
----------

#include <sys/types.h>
#include <unistd.h>
#include <sys/socket.h>

int main(void) {
    setsockopt(0, SOL_SOCKET, SO_ACCEPTFILTER, NULL, 0);
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for SO_BINDANY

objs/autotest.c:7:31: error: use of undeclared identifier 'SO_BINDANY'
    setsockopt(0, SOL_SOCKET, SO_BINDANY, NULL, 0);
                              ^
1 error generated.
ERROR:root:compiler frontend failed to generate LLVM bitcode, halting
----------

#include <sys/types.h>
#include <unistd.h>
#include <sys/socket.h>

int main(void) {
    setsockopt(0, SOL_SOCKET, SO_BINDANY, NULL, 0);
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for IP_TRANSPARENT

error: unresolved symbol: htons
Aborting compilation due to previous errors | undefined
Traceback (most recent call last):
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emcc.py", line 3062, in <module>
    sys.exit(run())
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emcc.py", line 1778, in run
    final = shared.Building.emscripten(final, append_ext=False, extra_args=extra_args)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/shared.py", line 2268, in emscripten
    emscripten._main(cmdline)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2228, in _main
    return temp_files.run_and_clean(lambda: main(
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/tempfiles.py", line 93, in run_and_clean
    return func()
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2233, in <lambda>
    DEBUG=DEBUG,
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2159, in main
    temp_files=temp_files, DEBUG=DEBUG)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 86, in emscript
    glue, forwarded_data = compiler_glue(metadata, libraries, compiler_engine, temp_files, DEBUG)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 218, in compiler_glue
    glue, forwarded_data = compile_settings(compiler_engine, libraries, temp_files)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 530, in compile_settings
    cwd=path_from_root('src'), error_limit=300)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/jsrun.py", line 132, in run_js
    raise Exception('Expected the command ' + str(command) + ' to finish with return code ' + str(assert_returncode) + ', but it returned with code ' + str(proc.returncode) + ' instead! Output: ' + str(ret)[:error_limit])
Exception: Expected the command ['/usr/local/bin/node', '/usr/local/Cellar/emscripten/1.38.12/libexec/src/compiler.js', '/tmp/tmpoHkwYE.txt', '/usr/local/Cellar/emscripten/1.38.12/libexec/src/library_pthread_stub.js'] to finish with return code 0, but it returned with code 1 instead! Output: // The Module object: Our interface to the outside world. We import
// and export values on it. There are various ways Module can be used:
// 1. Not defined. We create it here
// 2. A function parameter, function(Module) { ..generated code.. }
// 3. pre-run appended it, var Module = {}; ..generated 
----------

#include <sys/types.h>
#include <unistd.h>
#include <sys/socket.h>
                  #include <netinet/in.h>

int main(void) {
    setsockopt(0, IPPROTO_IP, IP_TRANSPARENT, NULL, 0);
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for IP_BINDANY

objs/autotest.c:8:31: error: use of undeclared identifier 'IP_BINDANY'
    setsockopt(0, IPPROTO_IP, IP_BINDANY, NULL, 0);
                              ^
1 error generated.
ERROR:root:compiler frontend failed to generate LLVM bitcode, halting
----------

#include <sys/types.h>
#include <unistd.h>
#include <sys/socket.h>
                  #include <netinet/in.h>

int main(void) {
    setsockopt(0, IPPROTO_IP, IP_BINDANY, NULL, 0);
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for IP_BIND_ADDRESS_NO_PORT

error: unresolved symbol: htons
Aborting compilation due to previous errors | undefined
Traceback (most recent call last):
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emcc.py", line 3062, in <module>
    sys.exit(run())
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emcc.py", line 1778, in run
    final = shared.Building.emscripten(final, append_ext=False, extra_args=extra_args)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/shared.py", line 2268, in emscripten
    emscripten._main(cmdline)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2228, in _main
    return temp_files.run_and_clean(lambda: main(
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/tempfiles.py", line 93, in run_and_clean
    return func()
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2233, in <lambda>
    DEBUG=DEBUG,
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2159, in main
    temp_files=temp_files, DEBUG=DEBUG)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 86, in emscript
    glue, forwarded_data = compiler_glue(metadata, libraries, compiler_engine, temp_files, DEBUG)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 218, in compiler_glue
    glue, forwarded_data = compile_settings(compiler_engine, libraries, temp_files)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 530, in compile_settings
    cwd=path_from_root('src'), error_limit=300)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/jsrun.py", line 132, in run_js
    raise Exception('Expected the command ' + str(command) + ' to finish with return code ' + str(assert_returncode) + ', but it returned with code ' + str(proc.returncode) + ' instead! Output: ' + str(ret)[:error_limit])
Exception: Expected the command ['/usr/local/bin/node', '/usr/local/Cellar/emscripten/1.38.12/libexec/src/compiler.js', '/tmp/tmpS21p87.txt', '/usr/local/Cellar/emscripten/1.38.12/libexec/src/library_pthread_stub.js'] to finish with return code 0, but it returned with code 1 instead! Output: // The Module object: Our interface to the outside world. We import
// and export values on it. There are various ways Module can be used:
// 1. Not defined. We create it here
// 2. A function parameter, function(Module) { ..generated code.. }
// 3. pre-run appended it, var Module = {}; ..generated 
----------

#include <sys/types.h>
#include <unistd.h>
#include <sys/socket.h>
                  #include <netinet/in.h>

int main(void) {
    setsockopt(0, IPPROTO_IP, IP_BIND_ADDRESS_NO_PORT, NULL, 0);
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for IP_RECVDSTADDR

objs/autotest.c:8:31: error: use of undeclared identifier 'IP_RECVDSTADDR'
    setsockopt(0, IPPROTO_IP, IP_RECVDSTADDR, NULL, 0);
                              ^
1 error generated.
ERROR:root:compiler frontend failed to generate LLVM bitcode, halting
----------

#include <sys/types.h>
#include <unistd.h>
#include <sys/socket.h>
                  #include <netinet/in.h>

int main(void) {
    setsockopt(0, IPPROTO_IP, IP_RECVDSTADDR, NULL, 0);
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for IP_SENDSRCADDR

objs/autotest.c:8:31: error: use of undeclared identifier 'IP_SENDSRCADDR'
    setsockopt(0, IPPROTO_IP, IP_SENDSRCADDR, NULL, 0);
                              ^
1 error generated.
ERROR:root:compiler frontend failed to generate LLVM bitcode, halting
----------

#include <sys/types.h>
#include <unistd.h>
#include <sys/socket.h>
                  #include <netinet/in.h>

int main(void) {
    setsockopt(0, IPPROTO_IP, IP_SENDSRCADDR, NULL, 0);
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for IP_PKTINFO

error: unresolved symbol: htons
Aborting compilation due to previous errors | undefined
Traceback (most recent call last):
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emcc.py", line 3062, in <module>
    sys.exit(run())
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emcc.py", line 1778, in run
    final = shared.Building.emscripten(final, append_ext=False, extra_args=extra_args)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/shared.py", line 2268, in emscripten
    emscripten._main(cmdline)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2228, in _main
    return temp_files.run_and_clean(lambda: main(
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/tempfiles.py", line 93, in run_and_clean
    return func()
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2233, in <lambda>
    DEBUG=DEBUG,
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2159, in main
    temp_files=temp_files, DEBUG=DEBUG)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 86, in emscript
    glue, forwarded_data = compiler_glue(metadata, libraries, compiler_engine, temp_files, DEBUG)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 218, in compiler_glue
    glue, forwarded_data = compile_settings(compiler_engine, libraries, temp_files)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 530, in compile_settings
    cwd=path_from_root('src'), error_limit=300)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/jsrun.py", line 132, in run_js
    raise Exception('Expected the command ' + str(command) + ' to finish with return code ' + str(assert_returncode) + ', but it returned with code ' + str(proc.returncode) + ' instead! Output: ' + str(ret)[:error_limit])
Exception: Expected the command ['/usr/local/bin/node', '/usr/local/Cellar/emscripten/1.38.12/libexec/src/compiler.js', '/tmp/tmpWD4Jwm.txt', '/usr/local/Cellar/emscripten/1.38.12/libexec/src/library_pthread_stub.js'] to finish with return code 0, but it returned with code 1 instead! Output: // The Module object: Our interface to the outside world. We import
// and export values on it. There are various ways Module can be used:
// 1. Not defined. We create it here
// 2. A function parameter, function(Module) { ..generated code.. }
// 3. pre-run appended it, var Module = {}; ..generated 
----------

#include <sys/types.h>
#include <unistd.h>
#include <sys/socket.h>
                  #include <netinet/in.h>

int main(void) {
    struct in_pktinfo  pkt;
                  pkt.ipi_spec_dst.s_addr = INADDR_ANY;
                  (void) pkt;
                  setsockopt(0, IPPROTO_IP, IP_PKTINFO, NULL, 0);
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for IPV6_RECVPKTINFO

error: unresolved symbol: htons
Aborting compilation due to previous errors | undefined
Traceback (most recent call last):
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emcc.py", line 3062, in <module>
    sys.exit(run())
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emcc.py", line 1778, in run
    final = shared.Building.emscripten(final, append_ext=False, extra_args=extra_args)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/shared.py", line 2268, in emscripten
    emscripten._main(cmdline)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2228, in _main
    return temp_files.run_and_clean(lambda: main(
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/tempfiles.py", line 93, in run_and_clean
    return func()
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2233, in <lambda>
    DEBUG=DEBUG,
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2159, in main
    temp_files=temp_files, DEBUG=DEBUG)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 86, in emscript
    glue, forwarded_data = compiler_glue(metadata, libraries, compiler_engine, temp_files, DEBUG)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 218, in compiler_glue
    glue, forwarded_data = compile_settings(compiler_engine, libraries, temp_files)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 530, in compile_settings
    cwd=path_from_root('src'), error_limit=300)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/jsrun.py", line 132, in run_js
    raise Exception('Expected the command ' + str(command) + ' to finish with return code ' + str(assert_returncode) + ', but it returned with code ' + str(proc.returncode) + ' instead! Output: ' + str(ret)[:error_limit])
Exception: Expected the command ['/usr/local/bin/node', '/usr/local/Cellar/emscripten/1.38.12/libexec/src/compiler.js', '/tmp/tmp0hxXye.txt', '/usr/local/Cellar/emscripten/1.38.12/libexec/src/library_pthread_stub.js'] to finish with return code 0, but it returned with code 1 instead! Output: // The Module object: Our interface to the outside world. We import
// and export values on it. There are various ways Module can be used:
// 1. Not defined. We create it here
// 2. A function parameter, function(Module) { ..generated code.. }
// 3. pre-run appended it, var Module = {}; ..generated 
----------

#include <sys/types.h>
#include <unistd.h>
#include <sys/socket.h>
                  #include <netinet/in.h>

int main(void) {
    setsockopt(0, IPPROTO_IPV6, IPV6_RECVPKTINFO, NULL, 0);
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for TCP_DEFER_ACCEPT

error: unresolved symbol: htons
Aborting compilation due to previous errors | undefined
Traceback (most recent call last):
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emcc.py", line 3062, in <module>
    sys.exit(run())
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emcc.py", line 1778, in run
    final = shared.Building.emscripten(final, append_ext=False, extra_args=extra_args)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/shared.py", line 2268, in emscripten
    emscripten._main(cmdline)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2228, in _main
    return temp_files.run_and_clean(lambda: main(
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/tempfiles.py", line 93, in run_and_clean
    return func()
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2233, in <lambda>
    DEBUG=DEBUG,
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2159, in main
    temp_files=temp_files, DEBUG=DEBUG)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 86, in emscript
    glue, forwarded_data = compiler_glue(metadata, libraries, compiler_engine, temp_files, DEBUG)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 218, in compiler_glue
    glue, forwarded_data = compile_settings(compiler_engine, libraries, temp_files)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 530, in compile_settings
    cwd=path_from_root('src'), error_limit=300)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/jsrun.py", line 132, in run_js
    raise Exception('Expected the command ' + str(command) + ' to finish with return code ' + str(assert_returncode) + ', but it returned with code ' + str(proc.returncode) + ' instead! Output: ' + str(ret)[:error_limit])
Exception: Expected the command ['/usr/local/bin/node', '/usr/local/Cellar/emscripten/1.38.12/libexec/src/compiler.js', '/tmp/tmpGbRtO8.txt', '/usr/local/Cellar/emscripten/1.38.12/libexec/src/library_pthread_stub.js'] to finish with return code 0, but it returned with code 1 instead! Output: // The Module object: Our interface to the outside world. We import
// and export values on it. There are various ways Module can be used:
// 1. Not defined. We create it here
// 2. A function parameter, function(Module) { ..generated code.. }
// 3. pre-run appended it, var Module = {}; ..generated 
----------

#include <sys/types.h>
#include <unistd.h>
#include <sys/socket.h>
                  #include <netinet/in.h>
                  #include <netinet/tcp.h>

int main(void) {
    setsockopt(0, IPPROTO_TCP, TCP_DEFER_ACCEPT, NULL, 0);
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for TCP_KEEPIDLE

error: unresolved symbol: htons
Aborting compilation due to previous errors | undefined
Traceback (most recent call last):
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emcc.py", line 3062, in <module>
    sys.exit(run())
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emcc.py", line 1778, in run
    final = shared.Building.emscripten(final, append_ext=False, extra_args=extra_args)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/shared.py", line 2268, in emscripten
    emscripten._main(cmdline)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2228, in _main
    return temp_files.run_and_clean(lambda: main(
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/tempfiles.py", line 93, in run_and_clean
    return func()
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2233, in <lambda>
    DEBUG=DEBUG,
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2159, in main
    temp_files=temp_files, DEBUG=DEBUG)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 86, in emscript
    glue, forwarded_data = compiler_glue(metadata, libraries, compiler_engine, temp_files, DEBUG)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 218, in compiler_glue
    glue, forwarded_data = compile_settings(compiler_engine, libraries, temp_files)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 530, in compile_settings
    cwd=path_from_root('src'), error_limit=300)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/jsrun.py", line 132, in run_js
    raise Exception('Expected the command ' + str(command) + ' to finish with return code ' + str(assert_returncode) + ', but it returned with code ' + str(proc.returncode) + ' instead! Output: ' + str(ret)[:error_limit])
Exception: Expected the command ['/usr/local/bin/node', '/usr/local/Cellar/emscripten/1.38.12/libexec/src/compiler.js', '/tmp/tmpROUx3z.txt', '/usr/local/Cellar/emscripten/1.38.12/libexec/src/library_pthread_stub.js'] to finish with return code 0, but it returned with code 1 instead! Output: // The Module object: Our interface to the outside world. We import
// and export values on it. There are various ways Module can be used:
// 1. Not defined. We create it here
// 2. A function parameter, function(Module) { ..generated code.. }
// 3. pre-run appended it, var Module = {}; ..generated 
----------

#include <sys/types.h>
#include <unistd.h>
#include <sys/socket.h>
                  #include <netinet/in.h>
                  #include <netinet/tcp.h>

int main(void) {
    setsockopt(0, IPPROTO_TCP, TCP_KEEPIDLE, NULL, 0);
                  setsockopt(0, IPPROTO_TCP, TCP_KEEPINTVL, NULL, 0);
                  setsockopt(0, IPPROTO_TCP, TCP_KEEPCNT, NULL, 0);
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for TCP_FASTOPEN

error: unresolved symbol: htons
Aborting compilation due to previous errors | undefined
Traceback (most recent call last):
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emcc.py", line 3062, in <module>
    sys.exit(run())
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emcc.py", line 1778, in run
    final = shared.Building.emscripten(final, append_ext=False, extra_args=extra_args)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/shared.py", line 2268, in emscripten
    emscripten._main(cmdline)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2228, in _main
    return temp_files.run_and_clean(lambda: main(
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/tempfiles.py", line 93, in run_and_clean
    return func()
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2233, in <lambda>
    DEBUG=DEBUG,
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2159, in main
    temp_files=temp_files, DEBUG=DEBUG)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 86, in emscript
    glue, forwarded_data = compiler_glue(metadata, libraries, compiler_engine, temp_files, DEBUG)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 218, in compiler_glue
    glue, forwarded_data = compile_settings(compiler_engine, libraries, temp_files)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 530, in compile_settings
    cwd=path_from_root('src'), error_limit=300)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/jsrun.py", line 132, in run_js
    raise Exception('Expected the command ' + str(command) + ' to finish with return code ' + str(assert_returncode) + ', but it returned with code ' + str(proc.returncode) + ' instead! Output: ' + str(ret)[:error_limit])
Exception: Expected the command ['/usr/local/bin/node', '/usr/local/Cellar/emscripten/1.38.12/libexec/src/compiler.js', '/tmp/tmpS9vmbx.txt', '/usr/local/Cellar/emscripten/1.38.12/libexec/src/library_pthread_stub.js'] to finish with return code 0, but it returned with code 1 instead! Output: // The Module object: Our interface to the outside world. We import
// and export values on it. There are various ways Module can be used:
// 1. Not defined. We create it here
// 2. A function parameter, function(Module) { ..generated code.. }
// 3. pre-run appended it, var Module = {}; ..generated 
----------

#include <sys/types.h>
#include <unistd.h>
#include <sys/socket.h>
                  #include <netinet/in.h>
                  #include <netinet/tcp.h>

int main(void) {
    setsockopt(0, IPPROTO_TCP, TCP_FASTOPEN, NULL, 0);
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for TCP_INFO

objs/autotest.c:9:24: error: invalid application of 'sizeof' to an incomplete type 'struct tcp_info'
    socklen_t optlen = sizeof(struct tcp_info);
                       ^     ~~~~~~~~~~~~~~~~~
objs/autotest.c:9:38: note: forward declaration of 'struct tcp_info'
    socklen_t optlen = sizeof(struct tcp_info);
                                     ^
objs/autotest.c:10:35: error: variable has incomplete type 'struct tcp_info'
                  struct tcp_info ti;
                                  ^
objs/autotest.c:9:38: note: forward declaration of 'struct tcp_info'
    socklen_t optlen = sizeof(struct tcp_info);
                                     ^
2 errors generated.
ERROR:root:compiler frontend failed to generate LLVM bitcode, halting
----------

#include <sys/types.h>
#include <unistd.h>
#include <sys/socket.h>
                  #include <netinet/in.h>
                  #include <netinet/tcp.h>

int main(void) {
    socklen_t optlen = sizeof(struct tcp_info);
                  struct tcp_info ti;
                  ti.tcpi_rtt = 0;
                  ti.tcpi_rttvar = 0;
                  ti.tcpi_snd_cwnd = 0;
                  ti.tcpi_rcv_space = 0;
                  getsockopt(0, IPPROTO_TCP, TCP_INFO, &ti, &optlen);
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for accept4()

error: unresolved symbol: htons
Aborting compilation due to previous errors | undefined
Traceback (most recent call last):
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emcc.py", line 3062, in <module>
    sys.exit(run())
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emcc.py", line 1778, in run
    final = shared.Building.emscripten(final, append_ext=False, extra_args=extra_args)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/shared.py", line 2268, in emscripten
    emscripten._main(cmdline)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2228, in _main
    return temp_files.run_and_clean(lambda: main(
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/tempfiles.py", line 93, in run_and_clean
    return func()
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2233, in <lambda>
    DEBUG=DEBUG,
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2159, in main
    temp_files=temp_files, DEBUG=DEBUG)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 86, in emscript
    glue, forwarded_data = compiler_glue(metadata, libraries, compiler_engine, temp_files, DEBUG)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 218, in compiler_glue
    glue, forwarded_data = compile_settings(compiler_engine, libraries, temp_files)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 530, in compile_settings
    cwd=path_from_root('src'), error_limit=300)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/jsrun.py", line 132, in run_js
    raise Exception('Expected the command ' + str(command) + ' to finish with return code ' + str(assert_returncode) + ', but it returned with code ' + str(proc.returncode) + ' instead! Output: ' + str(ret)[:error_limit])
Exception: Expected the command ['/usr/local/bin/node', '/usr/local/Cellar/emscripten/1.38.12/libexec/src/compiler.js', '/tmp/tmpLnxUai.txt', '/usr/local/Cellar/emscripten/1.38.12/libexec/src/library_pthread_stub.js'] to finish with return code 0, but it returned with code 1 instead! Output: // The Module object: Our interface to the outside world. We import
// and export values on it. There are various ways Module can be used:
// 1. Not defined. We create it here
// 2. A function parameter, function(Module) { ..generated code.. }
// 3. pre-run appended it, var Module = {}; ..generated 
----------

#include <sys/types.h>
#include <unistd.h>
#include <sys/socket.h>

int main(void) {
    accept4(0, NULL, NULL, SOCK_NONBLOCK);
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for eventfd()

error: unresolved symbol: eventfd
Aborting compilation due to previous errors | undefined
Traceback (most recent call last):
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emcc.py", line 3062, in <module>
    sys.exit(run())
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emcc.py", line 1778, in run
    final = shared.Building.emscripten(final, append_ext=False, extra_args=extra_args)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/shared.py", line 2268, in emscripten
    emscripten._main(cmdline)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2228, in _main
    return temp_files.run_and_clean(lambda: main(
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/tempfiles.py", line 93, in run_and_clean
    return func()
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2233, in <lambda>
    DEBUG=DEBUG,
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2159, in main
    temp_files=temp_files, DEBUG=DEBUG)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 86, in emscript
    glue, forwarded_data = compiler_glue(metadata, libraries, compiler_engine, temp_files, DEBUG)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 218, in compiler_glue
    glue, forwarded_data = compile_settings(compiler_engine, libraries, temp_files)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 530, in compile_settings
    cwd=path_from_root('src'), error_limit=300)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/jsrun.py", line 132, in run_js
    raise Exception('Expected the command ' + str(command) + ' to finish with return code ' + str(assert_returncode) + ', but it returned with code ' + str(proc.returncode) + ' instead! Output: ' + str(ret)[:error_limit])
Exception: Expected the command ['/usr/local/bin/node', '/usr/local/Cellar/emscripten/1.38.12/libexec/src/compiler.js', '/tmp/tmpkrMj_N.txt', '/usr/local/Cellar/emscripten/1.38.12/libexec/src/library_pthread_stub.js'] to finish with return code 0, but it returned with code 1 instead! Output: // The Module object: Our interface to the outside world. We import
// and export values on it. There are various ways Module can be used:
// 1. Not defined. We create it here
// 2. A function parameter, function(Module) { ..generated code.. }
// 3. pre-run appended it, var Module = {}; ..generated 
----------

#include <sys/types.h>
#include <unistd.h>
#include <sys/eventfd.h>

int main(void) {
    (void) eventfd(0, 0);
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for eventfd() (SYS_eventfd)


----------------------------------------
checking for int size


----------------------------------------
checking for long size


----------------------------------------
checking for long long size


----------------------------------------
checking for void * size


----------------------------------------
checking for uint32_t


----------------------------------------
checking for uint64_t


----------------------------------------
checking for sig_atomic_t


----------------------------------------
checking for sig_atomic_t size


----------------------------------------
checking for socklen_t


----------------------------------------
checking for in_addr_t


----------------------------------------
checking for in_port_t


----------------------------------------
checking for rlim_t


----------------------------------------
checking for uintptr_t


----------------------------------------
checking for system byte ordering


----------------------------------------
checking for size_t size


----------------------------------------
checking for off_t size


----------------------------------------
checking for time_t size


----------------------------------------
checking for AF_INET6


----------------------------------------
checking for setproctitle()

objs/autotest.c:7:5: error: implicit declaration of function 'setproctitle' is invalid in C99 [-Werror,-Wimplicit-function-declaration]
    setproctitle("test");;
    ^
1 error generated.
ERROR:root:compiler frontend failed to generate LLVM bitcode, halting
----------

#include <sys/types.h>
#include <unistd.h>
#include <stdlib.h>

int main(void) {
    setproctitle("test");;
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for pread()


----------------------------------------
checking for pwrite()


----------------------------------------
checking for pwritev()


----------------------------------------
checking for sys_nerr

objs/autotest.c:8:18: error: use of undeclared identifier 'sys_nerr'
    printf("%d", sys_nerr);;
                 ^
1 error generated.
ERROR:root:compiler frontend failed to generate LLVM bitcode, halting
----------

#include <sys/types.h>
#include <unistd.h>
#include <errno.h>
                  #include <stdio.h>

int main(void) {
    printf("%d", sys_nerr);;
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for _sys_nerr

objs/autotest.c:8:18: error: use of undeclared identifier '_sys_nerr'
    printf("%d", _sys_nerr);;
                 ^
1 error generated.
ERROR:root:compiler frontend failed to generate LLVM bitcode, halting
----------

#include <sys/types.h>
#include <unistd.h>
#include <errno.h>
                      #include <stdio.h>

int main(void) {
    printf("%d", _sys_nerr);;
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for maximum errno

1000

----------------------------------------
checking for localtime_r()


----------------------------------------
checking for clock_gettime(CLOCK_MONOTONIC)


----------------------------------------
checking for posix_memalign()


----------------------------------------
checking for memalign()


----------------------------------------
checking for mmap(MAP_ANON|MAP_SHARED)


----------------------------------------
checking for mmap("/dev/zero", MAP_SHARED)


----------------------------------------
checking for System V shared memory

error: unresolved symbol: shmctl
error: unresolved symbol: shmget
Aborting compilation due to previous errors | undefined
Traceback (most recent call last):
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emcc.py", line 3062, in <module>
    sys.exit(run())
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emcc.py", line 1778, in run
    final = shared.Building.emscripten(final, append_ext=False, extra_args=extra_args)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/shared.py", line 2268, in emscripten
    emscripten._main(cmdline)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2228, in _main
    return temp_files.run_and_clean(lambda: main(
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/tempfiles.py", line 93, in run_and_clean
    return func()
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2233, in <lambda>
    DEBUG=DEBUG,
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 2159, in main
    temp_files=temp_files, DEBUG=DEBUG)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 86, in emscript
    glue, forwarded_data = compiler_glue(metadata, libraries, compiler_engine, temp_files, DEBUG)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 218, in compiler_glue
    glue, forwarded_data = compile_settings(compiler_engine, libraries, temp_files)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/emscripten.py", line 530, in compile_settings
    cwd=path_from_root('src'), error_limit=300)
  File "/usr/local/Cellar/emscripten/1.38.12/libexec/tools/jsrun.py", line 132, in run_js
    raise Exception('Expected the command ' + str(command) + ' to finish with return code ' + str(assert_returncode) + ', but it returned with code ' + str(proc.returncode) + ' instead! Output: ' + str(ret)[:error_limit])
Exception: Expected the command ['/usr/local/bin/node', '/usr/local/Cellar/emscripten/1.38.12/libexec/src/compiler.js', '/tmp/tmpWjk77o.txt', '/usr/local/Cellar/emscripten/1.38.12/libexec/src/library_pthread_stub.js'] to finish with return code 0, but it returned with code 1 instead! Output: // The Module object: Our interface to the outside world. We import
// and export values on it. There are various ways Module can be used:
// 1. Not defined. We create it here
// 2. A function parameter, function(Module) { ..generated code.. }
// 3. pre-run appended it, var Module = {}; ..generated 
----------

#include <sys/types.h>
#include <unistd.h>
#include <sys/ipc.h>
                  #include <sys/shm.h>

int main(void) {
    int  id;
                  id = shmget(IPC_PRIVATE, 4096, (SHM_R|SHM_W|IPC_CREAT));
                  if (id == -1) return 1;
                  shmctl(id, IPC_RMID, NULL);;
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for POSIX semaphores


----------------------------------------
checking for struct msghdr.msg_control


----------------------------------------
checking for ioctl(FIONBIO)


----------------------------------------
checking for struct tm.tm_gmtoff


----------------------------------------
checking for struct dirent.d_namlen

objs/autotest.c:8:29: error: no member named 'd_namlen' in 'struct dirent'; did you mean 'd_name'?
    struct dirent  dir; dir.d_namlen = 0;
                            ^~~~~~~~
                            d_name
/usr/local/Cellar/emscripten/1.38.12/libexec/system/include/libc/dirent.h:25:7: note: 'd_name' declared here
        char d_name[256];
             ^
objs/autotest.c:8:38: error: array type 'char [256]' is not assignable
    struct dirent  dir; dir.d_namlen = 0;
                        ~~~~~~~~~~~~ ^
objs/autotest.c:9:42: error: no member named 'd_namlen' in 'struct dirent'; did you mean 'd_name'?
                  printf("%d", (int) dir.d_namlen);
                                         ^~~~~~~~
                                         d_name
/usr/local/Cellar/emscripten/1.38.12/libexec/system/include/libc/dirent.h:25:7: note: 'd_name' declared here
        char d_name[256];
             ^
3 errors generated.
ERROR:root:compiler frontend failed to generate LLVM bitcode, halting
----------

#include <sys/types.h>
#include <unistd.h>
#include <dirent.h>
                  #include <stdio.h>

int main(void) {
    struct dirent  dir; dir.d_namlen = 0;
                  printf("%d", (int) dir.d_namlen);
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for struct dirent.d_type


----------------------------------------
checking for sysconf(_SC_NPROCESSORS_ONLN)


----------------------------------------
checking for sysconf(_SC_LEVEL1_DCACHE_LINESIZE)

objs/autotest.c:7:13: error: use of undeclared identifier '_SC_LEVEL1_DCACHE_LINESIZE'
    sysconf(_SC_LEVEL1_DCACHE_LINESIZE);
            ^
1 error generated.
ERROR:root:compiler frontend failed to generate LLVM bitcode, halting
----------

#include <sys/types.h>
#include <unistd.h>


int main(void) {
    sysconf(_SC_LEVEL1_DCACHE_LINESIZE);
    return 0;
}

----------
/usr/local/Cellar/emscripten/1.38.12/libexec/emcc -pipe -D__APPLE_USE_RFC_3542 -o objs/autotest objs/autotest.c
----------

----------------------------------------
checking for openat(), fstatat()


----------------------------------------
checking for getaddrinfo()

